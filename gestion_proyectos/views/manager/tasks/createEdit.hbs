<section class="content-header">
  <h1>
        <b>{{action}} Tareas</b>
    </h1>
  <ol class="breadcrumb">
    <li><a href="#"><i class="fa fa-tachometer"></i>Tareas</a></li>
    <li class="active">{{action}}</li>
  </ol>
</section>
<hr>
<section class="content">
  <form class="row flex-centered" action="/tasks/{{action}}" method="post">
    <input type="hidden" id="resources">
    <div class="col-md-8 row">
      <div class="form-group col-md-6">
        <label for="project">Proyecto</label>
        <select class="form-control" name="project" required>
          {{#each projects}}
          <option value="{{id}}" {{#if select}}selected{{/if}}>{{name}}</option>
          {{/each}}
        </select>
      </div>
      <div class="form-group col-md-6">
        <label for="activity">Actividad</label>
        <select class="form-control" name="activity" required>
          {{#each activities}}
          <option value="{{id}}" {{#if select}}selected{{/if}}>{{name}}</option>
          {{/each}}
        </select>
      </div>
      <div class="form-group col-md-6">
        <label for="name">Nombre de la tarea</label>
        <input type="text" name="name" placeholder="Nombre de la tarea" class="form-control" value="{{task.name}}">
      </div>
      <div class="form-group col-md-6">
        <label for="state">Estado de la tarea</label>
        <select class="form-control" name="state" required>
          <option value="Aprobado" {{#if project.cero}}selected{{/if}}>Aprobado</option>
          <option value="Iniciado" {{#if project.uno}}selected{{/if}}>Iniciado</option>
          <option value="En proceso" {{#if project.dos}}selected{{/if}}>En proceso</option>
          <option value="Finalizado" {{#if project.tres}}selected{{/if}}>Finalizado</option>
        </select>
      </div>
      <div class="col-md-6 form-group">
        <label for="start">Fecha de inicio</label>
        <input type="date" name="start" value="{{task.start}}" class="form-control" required>
      </div>
      <div class="col-md-6 form-group">
        <label for="end">Fecha de fin</label>
        <input type="date" name="end" class="form-control" value="{{task.end}}" required>
      </div>
      <hr>
      <label for="">Listado de recursos</label>
      <div class="col-md-12">
        <table class="table table-striped table-condensed table-hover table-bordered">
          <thead>
            <th>Nombre</th>
            <th>Descripcion</th>
            <th>Acciones</th>
          </thead>
          <tbody>
            <tr>
              <td>TV</td>
              <td>Un pinche TV</td>
              <td style="width: 120px;">
                <ul class="list-buttons" style="justify-content: center;">
                  <li>
                    <button type="button" class="btn btn-success btn-block" name="button" id="add2" onclick="addResource(2);">
                      <i class="fa fa-plus" aria-hidden="true"></i>
                    </button>
                  </li>
                  <li>
                    <button type="button" class="btn btn-danger btn-block disable-item" name="button" id="drop2" onclick="dropResource(2);">
                      <i class="fa fa-trash" aria-hidden="true"></i>
                    </button>
                  </li>
                </ul>
              </td>
            </tr>
            <tr>
              <td>TV</td>
              <td>Un pinche TV</td>
              <td style="width: 120px;">
                <ul class="list-buttons" style="justify-content: center;">
                  <li>
                    <button type="button" class="btn btn-success btn-block" name="button" id="add1" onclick="addResource(1);">
                      <i class="fa fa-plus" aria-hidden="true"></i>
                    </button>
                  </li>
                  <li>
                    <button type="button" class="btn btn-danger btn-block disable-item" id="drop1" name="button" onclick="dropResource(1);">
                      <i class="fa fa-trash" aria-hidden="true"></i>
                    </button>
                  </li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="col-md-6">

      </div>
      <div class="col-md-3">
        <a href="/activitys/list" type="buttom" class="btn btn-flat btn-block btn-info">Cancelar</a>
      </div>
      <div class="col-md-3">
        <input type="submit" name="submit" class="btn btn-flat btn-block btn-{{color}}" value="{{action}}">
      </div>
    </div>
  </form>
</section>
<script type="text/javascript">
  var resources=new Array();
  function addResource(resource){
    if ($.inArray(resource, resources)<0) {
      resources.push(resource);
    }
    $("#add"+resource).addClass('disable-item');
    $("#drop"+resource).removeClass('disable-item');
    $("#resources").val(resources);
  }
  function dropResource(resource){
    resources.splice($.inArray(resource, resources),1);
    $("#drop"+resource).addClass('disable-item');
    $("#add"+resource).removeClass('disable-item');
    $("#resources").val(resources);
  }
</script>
